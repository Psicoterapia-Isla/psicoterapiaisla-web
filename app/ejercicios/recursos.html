<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Recursos internos | Psicoterapia Isla</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../assets/css/app.css">
</head>

<body class="app-body">

  <nav class="app-menu">
    <a href="../index.html">Inicio</a>
    <a href="../diario.html">Diario</a>
    <a href="../ejercicio.html">Ejercicios</a>
    <a href="../login.html">Salir</a>
  </nav>

  <main class="app-container">

    <h1>Recursos internos</h1>

    <p>
      Los recursos internos son capacidades, experiencias o cualidades
      que ya existen en ti, aunque a veces no estén disponibles.
      Este ejercicio no busca forzar nada, solo reconocer.
    </p>

    <!-- BLOQUE 1 -->
    <section>
      <h2>1. Momentos de capacidad</h2>
      <p>
        Piensa en situaciones, pasadas o recientes, en las que hayas podido
        sostener algo difícil.
      </p>
      <textarea
        id="momentos-capacidad"
        placeholder="¿Recuerdas algún momento en el que hayas salido adelante, aunque no fuera perfecto?">
      </textarea>
    </section>

    <!-- BLOQUE 2 -->
    <section>
      <h2>2. Cualidades personales</h2>
      <p>No tienen que ser grandes virtudes.</p>
      <textarea
        id="cualidades"
        placeholder="¿Qué cualidades tuyas te han ayudado en otros momentos?">
      </textarea>
    </section>

    <!-- BLOQUE 3 -->
    <section>
      <h2>3. Recursos corporales o sensoriales</h2>
      <p>
        A veces el recurso no es un pensamiento, sino una sensación.
      </p>
      <textarea
        id="recursos-corporales"
        placeholder="¿Hay algún gesto, postura, respiración o estímulo que te ayude a regularte un poco?">
      </textarea>
    </section>

    <!-- BLOQUE 4 -->
    <section>
      <h2>4. Apoyos internos disponibles hoy</h2>
      <p>
        No todos los recursos están disponibles todo el tiempo.
      </p>
      <textarea
        id="apoyos-actuales"
        placeholder="De todo lo anterior, ¿qué sientes que sí está accesible para ti ahora mismo?">
      </textarea>
    </section>

    <!-- BLOQUE 5 -->
    <section>
      <h2>5. Anclaje</h2>
      <p>
        Puedes elegir uno de tus recursos para recordarlo más adelante.
      </p>
      <textarea
        id="anclaje"
        placeholder="¿Cómo podrías recordarte este recurso cuando lo necesites?">
      </textarea>
    </section>

    <!-- ARCHIVO OPCIONAL (no se guarda aún) -->
    <section>
      <h2>Material opcional</h2>
      <p>
        Puedes subir una imagen, texto o documento que represente
        uno de tus recursos internos.
      </p>
      <input type="file">
    </section>

    <button id="guardar">Guardar ejercicio</button>

    <p class="legal-note">
      Este ejercicio no sustituye la terapia ni es un canal de urgencias.
      Si te sientes en riesgo, contacta con el 112.
    </p>

  </main>

  <script type="module">
    import { saveExercise } from "../assets/js/entries.js";
    import { requireAuth } from "../assets/js/auth.js";

    requireAuth();

    document.getElementById("guardar").addEventListener("click", async () => {
      try {
        await saveExercise("recursos_internos", {
          momentos_capacidad: document.getElementById("momentos-capacidad").value,
          cualidades: document.getElementById("cualidades").value,
          recursos_corporales: document.getElementById("recursos-corporales").value,
          apoyos_actuales: document.getElementById("apoyos-actuales").value,
          anclaje: document.getElementById("anclaje").value
        });

        alert("Ejercicio guardado");
      } catch (error) {
        console.error(error);
        alert("Error al guardar el ejercicio");
      }
    });
  </script>

</body>
</html>
