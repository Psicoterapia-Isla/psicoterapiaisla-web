<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Límites | Psicoterapia Isla</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../assets/css/app.css">
</head>

<body class="app-body">

  <nav class="app-menu">
    <a href="../index.html">Inicio</a>
    <a href="../diario.html">Diario</a>
    <a href="../ejercicio.html">Ejercicios</a>
    <a href="../login.html">Salir</a>
  </nav>

  <main class="app-container">

    <h1>Límites</h1>

    <p>
      Los límites no son castigos ni rechazos.
      Son una forma de cuidado personal y de protección emocional.
      Este ejercicio no busca que actúes ni que tomes decisiones,
      solo que observes con honestidad.
    </p>

    <!-- BLOQUE 1 -->
    <section>
      <h2>1. Situaciones difíciles</h2>
      <p>Piensa en contextos concretos, no en personas.</p>
      <textarea
        id="situaciones"
        placeholder="¿En qué situaciones te resulta más difícil poner límites?">
      </textarea>
    </section>

    <!-- BLOQUE 2 -->
    <section>
      <h2>2. Miedos asociados</h2>
      <p>Muchas dificultades con los límites tienen sentido a partir del miedo.</p>
      <textarea
        id="miedo"
        placeholder="¿Qué temes que pueda ocurrir si pones un límite?">
      </textarea>
    </section>

    <!-- BLOQUE 3 -->
    <section>
      <h2>3. Señales corporales</h2>
      <p>El cuerpo suele detectar la invasión antes que la mente.</p>
      <textarea
        id="reaccion-corporal"
        placeholder="¿Qué notas en tu cuerpo cuando alguien cruza un límite?">
      </textarea>
    </section>

    <!-- BLOQUE 4 -->
    <section>
      <h2>4. Límite posible</h2>
      <p>No tiene que ser un gran cambio.</p>
      <textarea
        id="limite-posible"
        placeholder="Imagina un límite pequeño, realista y seguro para ti.">
      </textarea>
    </section>

    <!-- BLOQUE 5 -->
    <section>
      <h2>5. Autorización interna</h2>
      <p>A veces el primer límite es interno.</p>
      <textarea
        id="autorizacion-interna"
        placeholder="¿Qué te ayudaría a darte permiso para respetar ese límite?">
      </textarea>
    </section>

    <button id="guardar">Guardar ejercicio</button>

    <p class="legal-note">
      Este ejercicio no sustituye la terapia ni es un canal de urgencias.
      Si te sientes en riesgo, contacta con el 112.
    </p>

  </main>

  <script type="module">
    import { saveExercise } from "../assets/js/firebase.js";
    import { requireAuth } from "../assets/js/auth.js";

    requireAuth();

    document.getElementById("guardar").addEventListener("click", async () => {
      try {
        await saveExercise("limites", {
          situaciones: document.getElementById("situaciones").value,
          miedo: document.getElementById("miedo").value,
          reaccion_corporal: document.getElementById("reaccion-corporal").value,
          limite_posible: document.getElementById("limite-posible").value,
          autorizacion_interna: document.getElementById("autorizacion-interna").value
        });

        alert("Ejercicio guardado");
      } catch (error) {
        console.error(error);
        alert("Error al guardar el ejercicio");
      }
    });
  </script>

</body>
</html>
