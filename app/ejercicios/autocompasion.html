<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Autocompasión | Psicoterapia Isla</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../assets/css/app.css">
</head>

<body class="app-body">

  <nav class="app-menu">
    <a href="../index.html">Inicio</a>
    <a href="../diario.html">Diario</a>
    <a href="../ejercicio.html">Ejercicios</a>
    <a href="../login.html">Salir</a>
  </nav>

  <main class="app-container">

    <h1>Autocompasión</h1>

    <p>
      La autocompasión no es rendirse ni justificarse.
      Es aprender a tratarte con el mismo respeto, comprensión y cuidado
      que ofrecerías a alguien a quien quieres.
    </p>

    <!-- BLOQUE 1 -->
    <section>
      <h2>1. Exigencia</h2>
      <p>Observa sin juzgarte.</p>
      <textarea
        id="exigencia"
        placeholder="¿En qué te estás exigiendo demasiado últimamente? ¿Qué te dices cuando algo no sale como esperabas?">
      </textarea>
    </section>

    <!-- BLOQUE 2 -->
    <section>
      <h2>2. Mirada externa</h2>
      <p>Imagina que una persona querida estuviera viviendo lo mismo que tú.</p>
      <textarea
        id="mirada-externa"
        placeholder="¿Qué le dirías? ¿Qué tono usarías con ella?">
      </textarea>
    </section>

    <!-- BLOQUE 3 -->
    <section>
      <h2>3. Cambio de diálogo interno</h2>
      <p>No hace falta creerte la frase al 100%. Basta con probar.</p>
      <textarea
        id="frase-compasiva"
        placeholder="¿Qué frase más amable podrías empezar a decirte a ti?">
      </textarea>
    </section>

    <!-- BLOQUE 4 -->
    <section>
      <h2>4. Gesto compasivo</h2>
      <p>La autocompasión también puede ser una acción pequeña.</p>
      <textarea
        id="gesto-compasivo"
        placeholder="¿Qué gesto concreto de cuidado podrías ofrecerte hoy?">
      </textarea>
    </section>

    <button id="guardar">Guardar ejercicio</button>

    <p class="legal-note">
      Este ejercicio no sustituye la terapia ni es un canal de urgencias.
      Si te sientes en riesgo, contacta con el 112.
    </p>

  </main>

  <!-- JS -->
  <script type="module">
    import { saveExercise } from "../assets/js/firebase.js";
    import { requireAuth } from "../assets/js/auth.js";

    requireAuth();

    document.getElementById("guardar").addEventListener("click", async () => {
      try {
        await saveExercise("autocompasion", {
          exigencia: document.getElementById("exigencia").value,
          mirada_externa: document.getElementById("mirada-externa").value,
          frase_compasiva: document.getElementById("frase-compasiva").value,
          gesto_compasivo: document.getElementById("gesto-compasivo").value
        });

        alert("Ejercicio guardado");
      } catch (e) {
        alert("Error al guardar el ejercicio");
        console.error(e);
      }
    });
  </script>

</body>
</html>
