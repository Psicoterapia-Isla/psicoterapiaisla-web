<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Agenda diaria | Psicoterapia Isla</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" href="assets/css/app.css">

<style>
.wrapper {
  max-width:720px;
  margin:0 auto;
  padding:1.5rem;
}

.header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:1rem;
}

.date-info {
  display:flex;
  gap:.75rem;
  align-items:center;
}

.circle {
  width:44px;
  height:44px;
  border-radius:50%;
  background:#1f6b4e;
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:600;
}

.nav {
  display:flex;
  gap:.5rem;
}

.slot {
  display:flex;
  align-items:center;
  gap:1rem;
  padding:.75rem;
  border-radius:12px;
  margin-bottom:.5rem;
  cursor:pointer;
}

.slot.free {
  background:#e5e7eb;
}

.slot.busy {
  background:#e6f4d7;
}

.time {
  width:60px;
  font-weight:600;
}

.modal {
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.4);
  z-index:999;
}

.modal-card {
  background:#fff;
  max-width:420px;
  margin:10vh auto;
  padding:1rem;
  border-radius:16px;
}

.actions {
  display:flex;
  justify-content:flex-end;
  gap:.5rem;
  margin-top:1rem;
}
</style>
</head>

<body class="app-body">
<header class="app-menu"></header>

<main class="wrapper">

  <div class="header">
    <div class="date-info">
      <div class="circle" id="dayNum"></div>
      <div>
        <div id="dayName"></div>
        <div id="dayMonth"></div>
      </div>
    </div>

    <div class="nav">
      <button id="prev" class="btn-secondary">←</button>
      <button id="today" class="btn-secondary">Hoy</button>
      <button id="next" class="btn-secondary">→</button>
    </div>
  </div>

  <div id="list"></div>
</main>

<!-- MODAL -->
<div id="modal" class="modal">
  <div class="modal-card">
    <h3 id="mPatient"></h3>
    <p id="mTime"></p>

    <label>
      <input type="checkbox" id="mDone">
      Sesión realizada
    </label>

    <div class="actions">
      <button id="mSave" class="btn-primary">Guardar</button>
      <button onclick="closeModal()">Cerrar</button>
    </div>
  </div>
</div>

<script type="module">
import { requireAuth } from "./assets/js/auth.js";
import { loadMenu } from "./assets/js/menu.js";
await requireAuth();
await loadMenu();
</script>

<script type="module" src="assets/js/agenda-diaria.js"></script>
</body>
</html>
