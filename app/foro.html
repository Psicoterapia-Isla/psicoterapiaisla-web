<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Foro | Psicoterapia Isla</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="assets/css/app.css">
</head>

<body class="app-layout">

<aside class="app-menu"></aside>

<main class="app-content">

  <!-- ======================
       COLUMNA IZQUIERDA
  ====================== -->
  <section class="forum-main">

    <h1>Foro</h1>

    <!-- MENSAJE INICIAL -->
    <section id="forum-placeholder" class="card">
      Selecciona un tema del foro para ver los mensajes.
    </section>

    <!-- CABECERA DEL TEMA (JS) -->
    <!-- ⚠️ NO BORRAR -->

    <!-- MENSAJES -->
    <section id="forum-posts"></section>

    <!-- NUEVO MENSAJE -->
    <form id="new-post-form" class="card" style="display:none;">
      <textarea
        id="post-content"
        placeholder="Escribe tu mensaje…"
        required
      ></textarea>

      <button type="submit" class="btn-primary">
        Publicar
      </button>
    </form>

  </section>

  <!-- ======================
       COLUMNA DERECHA
  ====================== -->
  <aside class="forum-sidebar">

    <section class="card">
      <h2>Temas del foro</h2>

      <!-- LISTADO -->
      <div id="forum-topics"></div>

      <!-- CREAR TEMA -->
      <form id="new-topic-form">
        <input
          type="text"
          id="topic-title"
          placeholder="Título del tema"
          required
        />

        <textarea
          id="topic-description"
          placeholder="Descripción del tema"
        ></textarea>

        <button type="submit" class="btn-primary">
          Crear tema
        </button>
      </form>
    </section>

</main>

<!-- ======================
     AUTH + MENÚ
====================== -->
<script type="module">
  import { requireAuth } from "./assets/js/auth.js";
  import { loadMenu } from "./assets/js/menu.js";

  await requireAuth();
  await loadMenu();
</script>

<!-- ======================
     LÓGICA FORO
====================== -->
<script type="module" src="assets/js/forumTopics.js"></script>
<script type="module" src="assets/js/forumPage.js"></script>

</body>
</html>
